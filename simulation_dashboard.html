<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Traffic Management - Live Simulation Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow-x: hidden;
        }
        
        .header {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .status-bar {
            display: flex;
            justify-content: space-around;
            margin: 20px;
            flex-wrap: wrap;
        }
        
        .status-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 10px;
            min-width: 200px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }
        
        .status-card:hover {
            transform: translateY(-5px);
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
            animation: pulse 2s infinite;
        }
        
        .status-online { background: #4CAF50; }
        .status-offline { background: #f44336; }
        .status-loading { background: #ff9800; }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .simulation-area {
            margin: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .traffic-intersection {
            width: 300px;
            height: 300px;
            margin: 20px auto;
            position: relative;
            background: #2c3e50;
            border-radius: 15px;
            border: 3px solid #34495e;
        }
        
        .road {
            position: absolute;
            background: #34495e;
        }
        
        .road-horizontal {
            width: 100%;
            height: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .road-vertical {
            width: 20px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .traffic-light {
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            animation: blink 2s infinite;
        }
        
        .light-north { top: 10px; left: 50%; transform: translateX(-50%); }
        .light-south { bottom: 10px; left: 50%; transform: translateX(-50%); }
        .light-east { right: 10px; top: 50%; transform: translateY(-50%); }
        .light-west { left: 10px; top: 50%; transform: translateY(-50%); }
        
        .light-red { background: #e74c3c; }
        .light-yellow { background: #f39c12; }
        .light-green { background: #27ae60; }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .vehicle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #3498db;
            border-radius: 50%;
            animation: move 3s linear infinite;
        }
        
        @keyframes move {
            0% { transform: translateX(0); }
            100% { transform: translateX(100px); }
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px;
        }
        
        .metric-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .log-area {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            margin: 20px;
            border-radius: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
        }
        
        .log-info { color: #3498db; }
        .log-success { color: #27ae60; }
        .log-warning { color: #f39c12; }
        .log-error { color: #e74c3c; }
        
        .controls {
            text-align: center;
            margin: 20px;
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üö¶ Smart Traffic Management System</h1>
        <p>Live Simulation Dashboard - Real-time Traffic Optimization</p>
    </div>
    
    <div class="status-bar">
        <div class="status-card">
            <h3>Frontend</h3>
            <span class="status-indicator status-online"></span>
            <span>Online</span>
            <p>Port: 3000</p>
        </div>
        <div class="status-card">
            <h3>Backend API</h3>
            <span class="status-indicator status-online"></span>
            <span>Online</span>
            <p>Port: 8000</p>
        </div>
        <div class="status-card">
            <h3>ML Engine</h3>
            <span class="status-indicator status-loading"></span>
            <span>Starting...</span>
            <p>Port: 8001</p>
        </div>
        <div class="status-card">
            <h3>CV Service</h3>
            <span class="status-indicator status-loading"></span>
            <span>Starting...</span>
            <p>Port: 5001</p>
        </div>
    </div>
    
    <div class="simulation-area">
        <h2 style="text-align: center; margin-bottom: 20px;">üéØ Live Traffic Intersection</h2>
        <div class="traffic-intersection">
            <div class="road road-horizontal"></div>
            <div class="road road-vertical"></div>
            
            <div class="traffic-light light-north light-red"></div>
            <div class="traffic-light light-south light-green"></div>
            <div class="traffic-light light-east light-red"></div>
            <div class="traffic-light light-west light-red"></div>
            
            <div class="vehicle" style="top: 50%; left: 10px; animation-delay: 0s;"></div>
            <div class="vehicle" style="top: 50%; left: 20px; animation-delay: 1s;"></div>
            <div class="vehicle" style="top: 50%; left: 30px; animation-delay: 2s;"></div>
        </div>
    </div>
    
    <div class="metrics">
        <div class="metric-card">
            <h3>Vehicle Count</h3>
            <div class="metric-value" id="vehicleCount">24</div>
            <p>Current intersection</p>
        </div>
        <div class="metric-card">
            <h3>Wait Time</h3>
            <div class="metric-value" id="waitTime">45s</div>
            <p>Average wait time</p>
        </div>
        <div class="metric-card">
            <h3>Throughput</h3>
            <div class="metric-value" id="throughput">180</div>
            <p>Vehicles/hour</p>
        </div>
        <div class="metric-card">
            <h3>ML Score</h3>
            <div class="metric-value" id="mlScore">0.85</div>
            <p>Optimization score</p>
        </div>
    </div>
    
    <div class="controls">
        <button class="btn" onclick="startSimulation()">‚ñ∂Ô∏è Start Simulation</button>
        <button class="btn" onclick="pauseSimulation()">‚è∏Ô∏è Pause</button>
        <button class="btn" onclick="resetSimulation()">üîÑ Reset</button>
        <button class="btn" onclick="openDashboard()">üåê Open Dashboard</button>
    </div>
    
    <div class="log-area">
        <h3>üìä System Logs</h3>
        <div id="logs">
            <div class="log-entry log-info">[INFO] System initializing...</div>
            <div class="log-entry log-success">[SUCCESS] Frontend started on port 3000</div>
            <div class="log-entry log-success">[SUCCESS] Backend API started on port 8000</div>
            <div class="log-entry log-warning">[WARNING] ML Engine starting...</div>
            <div class="log-entry log-warning">[WARNING] CV Service starting...</div>
            <div class="log-entry log-info">[INFO] Traffic simulation ready</div>
        </div>
    </div>

    <script>
        let simulationRunning = false;
        let vehicleCount = 24;
        let waitTime = 45;
        let throughput = 180;
        let mlScore = 0.85;
        
        function updateMetrics() {
            if (simulationRunning) {
                // Simulate real-time data changes
                vehicleCount += Math.floor(Math.random() * 6) - 3;
                vehicleCount = Math.max(0, vehicleCount);
                
                waitTime += Math.floor(Math.random() * 10) - 5;
                waitTime = Math.max(10, waitTime);
                
                throughput += Math.floor(Math.random() * 20) - 10;
                throughput = Math.max(100, throughput);
                
                mlScore += (Math.random() - 0.5) * 0.1;
                mlScore = Math.max(0, Math.min(1, mlScore));
                
                document.getElementById('vehicleCount').textContent = vehicleCount;
                document.getElementById('waitTime').textContent = waitTime + 's';
                document.getElementById('throughput').textContent = throughput;
                document.getElementById('mlScore').textContent = mlScore.toFixed(2);
                
                // Add log entry
                addLogEntry(`[INFO] Metrics updated - Vehicles: ${vehicleCount}, Wait: ${waitTime}s, Score: ${mlScore.toFixed(2)}`, 'info');
            }
        }
        
        function addLogEntry(message, type) {
            const logs = document.getElementById('logs');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = message;
            logs.appendChild(entry);
            logs.scrollTop = logs.scrollHeight;
            
            // Keep only last 50 entries
            while (logs.children.length > 50) {
                logs.removeChild(logs.firstChild);
            }
        }
        
        function startSimulation() {
            simulationRunning = true;
            addLogEntry('[SUCCESS] Simulation started', 'success');
            setInterval(updateMetrics, 2000);
        }
        
        function pauseSimulation() {
            simulationRunning = false;
            addLogEntry('[WARNING] Simulation paused', 'warning');
        }
        
        function resetSimulation() {
            simulationRunning = false;
            vehicleCount = 24;
            waitTime = 45;
            throughput = 180;
            mlScore = 0.85;
            
            document.getElementById('vehicleCount').textContent = vehicleCount;
            document.getElementById('waitTime').textContent = waitTime + 's';
            document.getElementById('throughput').textContent = throughput;
            document.getElementById('mlScore').textContent = mlScore.toFixed(2);
            
            addLogEntry('[INFO] Simulation reset', 'info');
        }
        
        function openDashboard() {
            window.open('http://localhost:3000', '_blank');
        }
        
        // Auto-start simulation after 3 seconds
        setTimeout(() => {
            addLogEntry('[INFO] Auto-starting simulation in 3 seconds...', 'info');
            setTimeout(startSimulation, 3000);
        }, 1000);
        
        // Update ML and CV status after 5 seconds
        setTimeout(() => {
            document.querySelectorAll('.status-card')[2].querySelector('.status-indicator').className = 'status-indicator status-online';
            document.querySelectorAll('.status-card')[2].querySelector('span:last-child').textContent = 'Online';
            
            document.querySelectorAll('.status-card')[3].querySelector('.status-indicator').className = 'status-indicator status-online';
            document.querySelectorAll('.status-card')[3].querySelector('span:last-child').textContent = 'Online';
            
            addLogEntry('[SUCCESS] ML Engine started on port 8001', 'success');
            addLogEntry('[SUCCESS] CV Service started on port 5001', 'success');
        }, 5000);
    </script>
</body>
</html>
